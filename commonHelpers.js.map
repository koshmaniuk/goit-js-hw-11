{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.gallery');\nconst btn = document.querySelector('.load-more');\n\nlet page = 1;\nlet item;\nbtn.style.display = 'none';\n\n\n\n// FORM CLICK\nfunction createMarkup(event) {\n  event.preventDefault();\n  item = event.target.elements.searchQuery.value;\n  list.innerHTML = '';\n    imageFinder(item)\n    .then(res => {\n      if (res.data.hits.length !== 0) {\n        btn.style.display = 'block';\n        list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n        page = 1\n        } else {\n          btn.style.display = 'none';\n          console.log(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      }\n    })\n    .catch(error => {\n      console.log('Error:', error);\n    });\n}\nform.addEventListener('submit', createMarkup);\n\n// BUTTON CLICK\n function onLoadMore()  {\n    page += 1;\n    console.log(page);\n    imageFinder(item, page)\n      .then(res => {\n        const pages = Math.ceil(res.data.totalHits / 40);\n        if(page >= pages) {\n          console.log(\"We're sorry, but you've reached the end of search results.\");\n          btn.style.display = 'none';\n        }\n        list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n      })\n      .catch(error => {\n        console.log('Error:', error);\n      });\n  }\nbtn.addEventListener('click', onLoadMore);\n\n\n// IMAGE FINDER\nasync function imageFinder(item, page) {\n  return await axios\n    .get(\n      `https://pixabay.com/api/?key=41245265-a97abc6deb4aa48b974617d51&q=${item}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`\n    )\n    .then(resp => {\n      return resp;\n    })\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n\n// MARKUP CREATOR\nfunction createImageMarkup(array) {\n  return array\n    .map(\n      ({ webformatURL, tags, likes, views, comments, downloads }) => `\n    <div class=\"photo-card\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\"loading=\"lazy\" class=\"gallery__image\"/>\n            <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Views ${views}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Comments ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Downloads ${downloads}</b>\n            </p>\n        </div>\n    </div>\n    `\n    )\n    .join('');\n    \n}\n"],"names":["form","list","btn","page","item","createMarkup","event","imageFinder","res","createImageMarkup","error","onLoadMore","pages","axios","resp","array","webformatURL","tags","likes","views","comments","downloads"],"mappings":"svBAIA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAM,SAAS,cAAc,YAAY,EAE/C,IAAIC,EAAO,EACPC,EACJF,EAAI,MAAM,QAAU,OAKpB,SAASG,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBF,EAAOE,EAAM,OAAO,SAAS,YAAY,MACzCL,EAAK,UAAY,GACfM,EAAYH,CAAI,EACf,KAAKI,GAAO,CACPA,EAAI,KAAK,KAAK,SAAW,GAC3BN,EAAI,MAAM,QAAU,QACpBD,EAAK,mBAAmB,YAAaQ,EAAkBD,EAAI,KAAK,IAAI,CAAC,EACrEL,EAAO,IAELD,EAAI,MAAM,QAAU,OACpB,QAAQ,IACR,0EACV,EAEA,CAAK,EACA,MAAMQ,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACjC,CAAK,CACL,CACAV,EAAK,iBAAiB,SAAUK,CAAY,EAG3C,SAASM,GAAc,CACpBR,GAAQ,EACR,QAAQ,IAAIA,CAAI,EAChBI,EAAYH,EAAMD,CAAI,EACnB,KAAKK,GAAO,CACX,MAAMI,EAAQ,KAAK,KAAKJ,EAAI,KAAK,UAAY,EAAE,EAC5CL,GAAQS,IACT,QAAQ,IAAI,4DAA4D,EACxEV,EAAI,MAAM,QAAU,QAEtBD,EAAK,mBAAmB,YAAaQ,EAAkBD,EAAI,KAAK,IAAI,CAAC,CAC7E,CAAO,EACA,MAAME,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACnC,CAAO,CACJ,CACHR,EAAI,iBAAiB,QAASS,CAAU,EAIxC,eAAeJ,EAAYH,EAAMD,EAAM,CACrC,OAAO,MAAMU,EACV,IACC,qEAAqET,CAAI,6EAA6ED,CAAI,EAC3J,EACA,KAAKW,GACGA,CACR,EACA,MAAMJ,GAAS,CACd,MAAM,IAAI,MAAMA,CAAK,CAC3B,CAAK,CACL,CAGA,SAASD,EAAkBM,EAAO,CAChC,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,gBAErDL,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,uBAGnBC,CAAK;AAAA;AAAA;AAAA,uBAGLC,CAAK;AAAA;AAAA;AAAA,0BAGFC,CAAQ;AAAA;AAAA;AAAA,2BAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK/B,EACA,KAAK,EAAE,CAEZ"}