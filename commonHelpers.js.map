{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport Toastify from 'toastify-js'\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.gallery');\nconst btn = document.querySelector('.load-more');\n\nlet page = 1;\nlet item;\nbtn.style.display = 'none';\n\n\n\nfunction errorMessage() {\n  Toastify({\n    text: \"Sorry, there are no images matching your search query. Please try again.\",\n    className: \"info\",\n    style: {\n      background: \"linear-gradient(to right, #00b09b, #96c93d)\",\n    }\n  }).showToast();\n}\n\nfunction infoMessage() {\n  Toastify({\n    text: \"We're sorry, but you've reached the end of search results.\",\n    className: \"info\",\n    style: {\n      background: \"linear-gradient(to right, #00b09b, #96c93d)\",\n    }\n  }).showToast();\n}\n\n// FORM CLICK\nfunction createMarkup(event) {\n  event.preventDefault();\n  item = event.target.elements.searchQuery.value;\n  list.innerHTML = '';\n  imageFinder(item)\n    .then(res => {\n      if (res.data.hits.length !== 0 && item !== \"\" && item !== \" \") {\n        btn.style.display = 'block';\n        list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n        page = 1;\n      } else {\n        btn.style.display = 'none';\n        errorMessage()        \n      }\n    })\n    .catch(error => {\n      console.log('Error:', error);\n    });\n}\nform.addEventListener('submit', createMarkup);\n\n// BUTTON CLICK\nfunction onLoadMore() {\n  page += 1;\n  console.log(page);\n  imageFinder(item, page)\n    .then(res => {\n      const pages = Math.ceil(res.data.totalHits / 40);\n      if (page >= pages) {\n        infoMessage()\n        btn.style.display = 'none';\n      }\n      list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n    })\n    .catch(error => {\n      console.log('Error:', error);\n    });\n}\nbtn.addEventListener('click', onLoadMore);\n\n// IMAGE FINDER\nasync function imageFinder(item, page) {\n  return await axios\n    .get(\n      `https://pixabay.com/api/?key=41245265-a97abc6deb4aa48b974617d51&q=${item}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`\n    )\n    .then(resp => {\n      return resp;\n    })\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n\n// MARKUP CREATOR\nfunction createImageMarkup(array) {\n  return array\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <div class=\"photo-card\">\n    <a class=\"gallery__link\" href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\"loading=\"lazy\" class=\"gallery__image\"/>\n    </a>\n            <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Views ${views}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Comments ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Downloads ${downloads}</b>\n            </p>\n        </div>\n    </div>\n    `\n    )\n    .join('');\n    let lightbox = new SimpleLightbox('.gallery__link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n}\n"],"names":["form","list","btn","page","item","errorMessage","Toastify","infoMessage","createMarkup","event","imageFinder","res","createImageMarkup","error","onLoadMore","pages","axios","resp","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAM,SAAS,cAAc,YAAY,EAE/C,IAAIC,EAAO,EACPC,EACJF,EAAI,MAAM,QAAU,OAIpB,SAASG,GAAe,CACtBC,EAAS,CACP,KAAM,2EACN,UAAW,OACX,MAAO,CACL,WAAY,6CACb,CACL,CAAG,EAAE,UAAS,CACd,CAEA,SAASC,GAAc,CACrBD,EAAS,CACP,KAAM,6DACN,UAAW,OACX,MAAO,CACL,WAAY,6CACb,CACL,CAAG,EAAE,UAAS,CACd,CAGA,SAASE,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBL,EAAOK,EAAM,OAAO,SAAS,YAAY,MACzCR,EAAK,UAAY,GACjBS,EAAYN,CAAI,EACb,KAAKO,GAAO,CACPA,EAAI,KAAK,KAAK,SAAW,GAAKP,IAAS,IAAMA,IAAS,KACxDF,EAAI,MAAM,QAAU,QACpBD,EAAK,mBAAmB,YAAaW,EAAkBD,EAAI,KAAK,IAAI,CAAC,EACrER,EAAO,IAEPD,EAAI,MAAM,QAAU,OACpBG,EAAc,EAEtB,CAAK,EACA,MAAMQ,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACjC,CAAK,CACL,CACAb,EAAK,iBAAiB,SAAUQ,CAAY,EAG5C,SAASM,GAAa,CACpBX,GAAQ,EACR,QAAQ,IAAIA,CAAI,EAChBO,EAAYN,EAAMD,CAAI,EACnB,KAAKQ,GAAO,CACX,MAAMI,EAAQ,KAAK,KAAKJ,EAAI,KAAK,UAAY,EAAE,EAC3CR,GAAQY,IACVR,EAAa,EACbL,EAAI,MAAM,QAAU,QAEtBD,EAAK,mBAAmB,YAAaW,EAAkBD,EAAI,KAAK,IAAI,CAAC,CAC3E,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACjC,CAAK,CACL,CACAX,EAAI,iBAAiB,QAASY,CAAU,EAGxC,eAAeJ,EAAYN,EAAMD,EAAM,CACrC,OAAO,MAAMa,EACV,IACC,qEAAqEZ,CAAI,6EAA6ED,CAAI,EAC3J,EACA,KAAKc,GACGA,CACR,EACA,MAAMJ,GAAS,CACd,MAAM,IAAI,MAAMA,CAAK,CAC3B,CAAK,CACL,CAGA,SAASD,EAAkBM,EAAO,CAChC,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,qCAE/CL,CAAa;AAAA,gBAClCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,uBAInBC,CAAK;AAAA;AAAA;AAAA,uBAGLC,CAAK;AAAA;AAAA;AAAA,0BAGFC,CAAQ;AAAA;AAAA;AAAA,2BAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK/B,EACA,KAAK,EAAE,CAKZ"}