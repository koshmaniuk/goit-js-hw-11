{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport Toastify from 'toastify-js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.gallery');\nconst btn = document.querySelector('.load-more');\n\nlet page = 1;\nlet item;\nbtn.style.display = 'none';\n\nfunction errorMessage() {\n  Toastify({\n    text: 'Sorry, there are no images matching your search query. Please try again.',\n    className: 'info',\n    style: {\n      background: 'linear-gradient(to right, #00b09b, #96c93d)',\n    },\n  }).showToast();\n}\n\nfunction infoMessage() {\n  Toastify({\n    text: \"We're sorry, but you've reached the end of search results.\",\n    className: 'info',\n    style: {\n      background: 'linear-gradient(to right, #00b09b, #96c93d)',\n    },\n  }).showToast();\n}\n\nlet gallery;\n\n// FORM CLICK\nfunction createMarkup(event) {\n  event.preventDefault();\n  item = event.target.elements.searchQuery.value;\n  list.innerHTML = '';\n\n  imageFinder(item)\n    .then(res => {\n      if (res.data.hits.length !== 0 && item !== '' && item !== ' ') {\n        btn.style.display = 'block';\n        list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n        page = 1;\n        \n        gallery = new SimpleLightbox('.gallery__link', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        btn.style.display = 'none';\n        errorMessage();\n      }\n    })\n    .catch(error => {\n      console.log('Error:', error);\n    });\n}\nform.addEventListener('submit', createMarkup);\n\n// BUTTON CLICK\nfunction onLoadMore() {\n  page += 1;\n  console.log(page);\n  \n  imageFinder(item, page)\n    .then(res => {\n      const pages = Math.ceil(res.data.totalHits / 40);\n      if (page >= pages) {\n        infoMessage();\n        btn.style.display = 'none';\n      }\n      list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n      gallery.refresh();\n    })\n    .catch(error => {\n      console.log('Error:', error);\n    });\n}\nbtn.addEventListener('click', onLoadMore);\n\n// IMAGE FINDER\nasync function imageFinder(item, page) {\n  return await axios\n    .get(\n      `https://pixabay.com/api/?key=41245265-a97abc6deb4aa48b974617d51&q=${item}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`\n    )\n    .then(resp => {\n      return resp;\n    })\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n\n// MARKUP CREATOR\nfunction createImageMarkup(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <div class=\"photo-card\">\n    <a class=\"gallery__link\" href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\"loading=\"lazy\" class=\"gallery__image\"/>\n    </a>\n            <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Views ${views}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Comments ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Downloads ${downloads}</b>\n            </p>\n        </div>\n    </div>\n    `\n    )\n    .join('');\n}\n"],"names":["form","list","btn","page","item","errorMessage","Toastify","infoMessage","gallery","createMarkup","event","imageFinder","res","createImageMarkup","SimpleLightbox","error","onLoadMore","pages","axios","resp","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAKA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAM,SAAS,cAAc,YAAY,EAE/C,IAAIC,EAAO,EACPC,EACJF,EAAI,MAAM,QAAU,OAEpB,SAASG,GAAe,CACtBC,EAAS,CACP,KAAM,2EACN,UAAW,OACX,MAAO,CACL,WAAY,6CACb,CACL,CAAG,EAAE,UAAS,CACd,CAEA,SAASC,GAAc,CACrBD,EAAS,CACP,KAAM,6DACN,UAAW,OACX,MAAO,CACL,WAAY,6CACb,CACL,CAAG,EAAE,UAAS,CACd,CAEA,IAAIE,EAGJ,SAASC,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBN,EAAOM,EAAM,OAAO,SAAS,YAAY,MACzCT,EAAK,UAAY,GAEjBU,EAAYP,CAAI,EACb,KAAKQ,GAAO,CACPA,EAAI,KAAK,KAAK,SAAW,GAAKR,IAAS,IAAMA,IAAS,KACxDF,EAAI,MAAM,QAAU,QACpBD,EAAK,mBAAmB,YAAaY,EAAkBD,EAAI,KAAK,IAAI,CAAC,EACrET,EAAO,EAEPK,EAAU,IAAIM,EAAe,iBAAkB,CAC7C,aAAc,MACd,aAAc,GACxB,CAAS,IAEDZ,EAAI,MAAM,QAAU,OACpBG,IAER,CAAK,EACA,MAAMU,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACjC,CAAK,CACL,CACAf,EAAK,iBAAiB,SAAUS,CAAY,EAG5C,SAASO,GAAa,CACpBb,GAAQ,EACR,QAAQ,IAAIA,CAAI,EAEhBQ,EAAYP,EAAMD,CAAI,EACnB,KAAKS,GAAO,CACX,MAAMK,EAAQ,KAAK,KAAKL,EAAI,KAAK,UAAY,EAAE,EAC3CT,GAAQc,IACVV,IACAL,EAAI,MAAM,QAAU,QAEtBD,EAAK,mBAAmB,YAAaY,EAAkBD,EAAI,KAAK,IAAI,CAAC,EACrEJ,EAAQ,QAAO,CACrB,CAAK,EACA,MAAMO,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACjC,CAAK,CACL,CACAb,EAAI,iBAAiB,QAASc,CAAU,EAGxC,eAAeL,EAAYP,EAAMD,EAAM,CACrC,OAAO,MAAMe,EACV,IACC,qEAAqEd,CAAI,6EAA6ED,CAAI,EAC3J,EACA,KAAKgB,GACGA,CACR,EACA,MAAMJ,GAAS,CACd,MAAM,IAAI,MAAMA,CAAK,CAC3B,CAAK,CACL,CAGA,SAASF,EAAkBO,EAAO,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,qCAEyBL,CAAa;AAAA,gBAClCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,uBAInBC,CAAK;AAAA;AAAA;AAAA,uBAGLC,CAAK;AAAA;AAAA;AAAA,0BAGFC,CAAQ;AAAA;AAAA;AAAA,2BAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK/B,EACA,KAAK,EAAE,CACZ"}