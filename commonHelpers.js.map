{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.gallery');\nconst btn = document.querySelector('.load-more');\n\nlet page = 1;\nlet item;\nbtn.style.display = 'none';\n\nfunction errorMessage() {\n  Notiflix.Notify.success(\n    'Sorry, there are no images matching your search query. Please try again.',\n    {\n      timeout: 3000,\n      width: '400px',\n      fontSize: '24px',\n    }\n  );\n}\n\n// FORM CLICK\nfunction createMarkup(event) {\n  event.preventDefault();\n  item = event.target.elements.searchQuery.value;\n  list.innerHTML = '';\n    imageFinder(item)\n    .then(res => {\n      if (res.data.hits.length !== 0) {\n        btn.style.display = 'block';\n        list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n        page = 1\n        } else {\n          errorMessage() \n          btn.style.display = 'none';\n          \n      }\n    })\n    .catch(error => {\n      console.log('Error:', error);\n    });\n}\nform.addEventListener('submit', createMarkup);\n\n// BUTTON CLICK\n function onLoadMore()  {\n    page += 1;\n    console.log(page);\n    imageFinder(item, page)\n      .then(res => {\n        const pages = Math.ceil(res.data.totalHits / 40);\n        if(page >= pages) {\n          console.log(\"We're sorry, but you've reached the end of search results.\");\n          btn.style.display = 'none';\n        }\n        list.insertAdjacentHTML('beforeend', createImageMarkup(res.data.hits));\n      })\n      .catch(error => {\n        console.log('Error:', error);\n      });\n  }\nbtn.addEventListener('click', onLoadMore);\n\n\n// IMAGE FINDER\nasync function imageFinder(item, page) {\n  return await axios\n    .get(\n      `https://pixabay.com/api/?key=41245265-a97abc6deb4aa48b974617d51&q=${item}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`\n    )\n    .then(resp => {\n      return resp;\n    })\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n\n// MARKUP CREATOR\nfunction createImageMarkup(array) {\n  return array\n    .map(\n      ({ webformatURL, tags, likes, views, comments, downloads }) => `\n    <div class=\"photo-card\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\"loading=\"lazy\" class=\"gallery__image\"/>\n            <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Views ${views}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Comments ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Downloads ${downloads}</b>\n            </p>\n        </div>\n    </div>\n    `\n    )\n    .join('');\n    \n}\n"],"names":["form","list","btn","page","item","errorMessage","createMarkup","event","imageFinder","res","createImageMarkup","error","onLoadMore","pages","axios","resp","array","webformatURL","tags","likes","views","comments","downloads"],"mappings":"svBAIA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAM,SAAS,cAAc,YAAY,EAE/C,IAAIC,EAAO,EACPC,EACJF,EAAI,MAAM,QAAU,OAEpB,SAASG,GAAe,CACtB,SAAS,OAAO,QACd,2EACA,CACE,QAAS,IACT,MAAO,QACP,SAAU,MACX,CACL,CACA,CAGA,SAASC,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBH,EAAOG,EAAM,OAAO,SAAS,YAAY,MACzCN,EAAK,UAAY,GACfO,EAAYJ,CAAI,EACf,KAAKK,GAAO,CACPA,EAAI,KAAK,KAAK,SAAW,GAC3BP,EAAI,MAAM,QAAU,QACpBD,EAAK,mBAAmB,YAAaS,EAAkBD,EAAI,KAAK,IAAI,CAAC,EACrEN,EAAO,IAELE,EAAc,EACdH,EAAI,MAAM,QAAU,OAG9B,CAAK,EACA,MAAMS,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACjC,CAAK,CACL,CACAX,EAAK,iBAAiB,SAAUM,CAAY,EAG3C,SAASM,GAAc,CACpBT,GAAQ,EACR,QAAQ,IAAIA,CAAI,EAChBK,EAAYJ,EAAMD,CAAI,EACnB,KAAKM,GAAO,CACX,MAAMI,EAAQ,KAAK,KAAKJ,EAAI,KAAK,UAAY,EAAE,EAC5CN,GAAQU,IACT,QAAQ,IAAI,4DAA4D,EACxEX,EAAI,MAAM,QAAU,QAEtBD,EAAK,mBAAmB,YAAaS,EAAkBD,EAAI,KAAK,IAAI,CAAC,CAC7E,CAAO,EACA,MAAME,GAAS,CACd,QAAQ,IAAI,SAAUA,CAAK,CACnC,CAAO,CACJ,CACHT,EAAI,iBAAiB,QAASU,CAAU,EAIxC,eAAeJ,EAAYJ,EAAMD,EAAM,CACrC,OAAO,MAAMW,EACV,IACC,qEAAqEV,CAAI,6EAA6ED,CAAI,EAC3J,EACA,KAAKY,GACGA,CACR,EACA,MAAMJ,GAAS,CACd,MAAM,IAAI,MAAMA,CAAK,CAC3B,CAAK,CACL,CAGA,SAASD,EAAkBM,EAAO,CAChC,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,gBAErDL,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,uBAGnBC,CAAK;AAAA;AAAA;AAAA,uBAGLC,CAAK;AAAA;AAAA;AAAA,0BAGFC,CAAQ;AAAA;AAAA;AAAA,2BAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK/B,EACA,KAAK,EAAE,CAEZ"}